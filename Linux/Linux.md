# Linux

## Linux基本组成:内核->系统库->Shell->应用程序

## Linux发行版:集成上述功能的完整操作系统

## 安装Linux

1. 虚拟机软件
2. 容器
3. 云服务器

## 云服务器连接

### SSH方式连接

#### 1. 打开本地终端（Windows 打开 PowerShell），输入命令：ssh 登录名@服务器公网IP，例如ssh root@47.98.xxx.xxx

#### 2. 若用密钥对登录，命令为ssh -i 私钥文件路径 登录名@公网IP，比如ssh -i C:\private_key.pem root@47.98.xxx.xxx

## Vim编辑器使用

### 命令行中输入 **vi** 或者 **vim** 打开

#### 创建文件

```bash
vi hello.txt
```

### 在 Linux 系统的文本编辑器vi中，有三种核心模式，它们的功能和切换方式如下

### 命令模式（Command Mode）

#### 功能：是vi的默认模式，用于执行各种命令（如光标移动、文本删除 / 复制 / 粘贴、模式切换等）

#### 进入方式：打开vi时默认进入，或从其他模式按Esc键返回

- h j k l: 光标移动 左 下 上 右

- ^ 光标移动到行首
  
- $ 光标移动到行末
  
- yy 复制当前行
  
- p 粘贴
  
- dd 删除当前行

***

### 插入模式（Insert Mode）

#### 功能：用于输入和编辑文本内容，此时可以像普通文本编辑器一样直接打字。

#### 进入方式：在命令模式下，按以下键之一进入：

- i：在光标当前位置前插入；

- I：在光标所在行开头插入；

- a：在光标当前位置后插入；

- A：在光标所在行末尾插入；

- o：在光标下一行新建空行并插入；

- O：在光标上一行新建空行并插入。

退出方式：按Esc键返回命令模式

***

### 末行模式（Ex Mode/Last Line Mode）

#### 功能：用于执行全局命令（如保存、退出、查找替换、设置语法高亮等）

#### 进入方式：在命令模式下按:键进入（此时光标会跳到屏幕底部的命令行）

常用操作示例：

- 保存：:w；

- 退出：:q；

- 保存并退出：:wq（或:x）；

- 强制退出（不保存）：:q!；

- 查找替换：:s/旧内容/新内容/g（全局替换当前行）、:%s/旧内容/新内容/g（全局替换整个文件）；

- 退出方式：按Enter执行命令后自动返回命令模式，或按Esc放弃命令并返回

## Linux常用命令

### **ls**

#### 列出当前目录下的所有文件和目录

- `ls -l` 显示更详细信息 权限 文件大小 文件创建时间 文件名

- `ls -a` 显示隐藏文件 半角英文的点开头的文件和目录都是隐藏的
  
- `-h` 显示文件大小为可读格式

- `-t` 按创建时间排序

- `-r` 时间倒序显示

注意：`ls /` 是显示linux根目录文件夹下的所有文件，`ls`是显示当前目录下的文件

***

### **chmod**

#### 文件权限三个一组，共三组，分别代表文件所有者、文件所在目录和所有其他用户

#### 类角色

- u：所有者（User）—— 文件 / 目录的创建者
- g：所属组（Group）—— 所有者所在的用户组
- o：其他人（Other）—— 既不是所有者，也不在所属组的用户
- a：所有人（All）—— 包含 u、g、o 三者
  
#### 3 种操作

- r：读权限（Read）—— 查看文件内容 / 列出目录下的文件（对应数字 4）
- w：写权限（Write）—— 修改文件内容 / 新增 / 删除目录下的文件（对应数字 2）
- x：执行权限（eXecute）—— 运行可执行文件 / 进入目录（对应数字 1）
- -：无权限（对应数字 0）

#### 权限标识示例

比如 rwxr-xr-- 拆解：

- 所有者（u）：rwx → 可读、可写、可执行（4+2+1=7）
- 所属组（g）：r-x → 可读、可执行（4+0+1=5）
- 其他人（o）：r-- → 仅可读（4+0+0=4）
- 数字简化表示：754（最常用的权限表示方式）

#### 用法 1：数字法（最常用，直接用数字组合赋值权限）

```bash
# 给脚本文件设置“所有者全权限，组和其他人可读可执行”（最常用）
chmod 755 test.sh

# 给普通文本文件设置“仅所有者可读可写”（安全）
chmod 600 config.ini

# 给目录设置“所有人可读写执行”（测试用，不推荐生产环境）
chmod 777 /data
```

#### 用法 2：符号法（灵活调整权限，不覆盖原有权限）

```bash
# 给所有者添加执行权限（不影响其他权限）
chmod u+x test.sh

# 给所属组移除写权限
chmod g-w config.ini

# 给其他人添加读权限
chmod o+r log.txt

# 给所有人添加读执行权限（等价于 755 中 g 和 o 的权限）
chmod a+rx test.sh

# 覆盖所有者权限为“可读可写”（不管之前是什么权限）
chmod u=rw file.txt
```

***

### **pwd**

#### 显示当前目录

***

### **cd**

#### 切换目录

***

### **rm**

#### 删除文件

```bash
# 递归删除文件夹及子文件
rm -r folder
```

注意：Linux中删除文件不可逆，删除文件后无法恢复

***

### **mkdir**

#### 创建目录

```bash
# 多级目录创建
mkdir -p /data/logs/nginx
```

***

### **rmdir**

#### 删除空目录
